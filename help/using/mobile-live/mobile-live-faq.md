---
solution: Journey Optimizer
product: journey optimizer
title: 常见问题
description: 实时活动常见问题解答
topic: Content Management
role: User
level: Beginner
hide: true
hidefromtoc: true
exl-id: e7e994ca-aa0c-4e86-8710-c87430b74188
source-git-commit: 6b4e3a6c32d24861f1ea8df54fc2e4fbb19d0ce7
workflow-type: tm+mt
source-wordcount: '1746'
ht-degree: 0%

---

# 常见问题 {#mobile-live-faq}

## 一般问题

+++实时活动和推送通知之间有何区别？

实时活动提供对锁屏界面和Dynamic Island的持久实时更新，无需用户解锁其设备。 推送通知是临时警报，在关闭后便会消失。 实时活动将保持可见，并且可多次更新，直到明确结束。

+++

+++一次可以激活多少个实时活动？

iOS应用程序可以同时运行多个实时活动，包括使用相同`ActivityAttributes`类型的多个实时活动。

开发人员对给定属性类型的实时活动可以存在的数量没有硬性限制。 例如，您可以根据应用程序逻辑的要求启动任意数量的投放，每个正在进行的投放或历程启动一次。 但是，iOS对一次可以活跃或可见的实时活动数量实施了系统级别限制。

实践中：

* iOS通常最多支持每个应用程序并行大约5个实时活动。

* 如果超过此数量，系统可能会停止显示某些活动或终止旧活动以节约资源。

* 每个实时活动都有一个唯一的`Activity.id`，可让您单独更新或结束该活动。

+++

+++用户是否需要打开应用程序才能接收实时活动更新？

不是。即使应用程序完全关闭，也可以远程启动、更新和结束实时活动，这是该功能的主要优势之一。

+++

+++哪些iOS版本支持实时活动？

* iOS 16.1+：基本实时活动支持
* iOS 17.2+：即推即用功能（无需打开应用程序即可远程启动）
* iOS 18+：基于受众的直播活动支持广播渠道
+++

+++实时活动可以保持活动状态多长时间？

Apple将实时活动限制为&#x200B;**8小时的活动更新**。 之后，系统会自动结束活动，不过在移除之前，它最多可以在静态状态下再显示&#x200B;**12小时**。 您还可以在应用程序中设置一个`dismissalDate`或显式调用`activity.end()`，从而更快地结束实时活动。

+++

### 开发人员问题

+++是否需要为实时活动创建单独的小组件扩展？

可以。实时活动通过WidgetKit显示，因此您需要在Xcode项目中创建构件扩展并实施`ActivityConfiguration`。
[了解有关Widget配置的更多信息](mobile-live-configuration-sdk.md)

+++

+++我能否对本地和远程实时活动使用相同的`LiveActivityAttributes`类？

可以。相同的属性类适用于本地启动和远程启动（即推入启动）的实时活动。 您需要确保向`Messaging.registerLiveActivity()`注册它。

+++

+++如果发送不存在的实时活动的更新，会发生什么情况？

如果您发送不存在的`liveActivityID`或`channelID`的更新或结束事件，则请求将在设备上静默失败。 始终确保您跟踪每个用户处于活动状态的实时活动。

+++

+++能否在iOS模拟器中测试实时活动？

能，您可以在iOS模拟器中测试本地启动和远程启动的实时活动。

* **本地**：这包括使用&#x200B;**ActivityKit API**&#x200B;直接从应用程序创建、更新和结束实时活动。

* **远程**：若要远程测试Live Activity功能，请将我们的消息传送SDK集成到您的应用程序中，并使用提供的执行API发送远程启动、更新和结束到您的测试设备或iOS模拟器。 与当前通过Adobe SDK集成测试推送通知的方式类似。

+++

+++当应用程序处于后台时，如何处理更新？

SDK会自动处理此任务。 注册后，即使应用程序终止，Live Activities也会收到更新。 不需要其他背景模式。
+++

+++`liveActivityID`和`channelID`之间有何区别？

* `liveActivityID`：用于针对特定用户的个人（单一）实时活动。 每个ID表示一个唯一的实时活动实例。
* `channelID`：用于向受众发送广播直播活动。 受众中的所有用户都会在同一渠道中接收相同的更新。
+++

+++我是否可以在锁屏界面中单独自定义Dynamic Island外观？

可以。`ActivityConfiguration`具有锁屏内容和Dynamic Island内容的单独关闭（展开、紧凑和最小状态），每个设计都是独立的。
+++

+++是否需要手动存储推送令牌？

不是。当您使用`Messaging.registerLiveActivity()`注册实时活动类型时，SDK会自动为您收集和管理推送令牌。
+++

+++实时活动的远程启动是否存在限制？

可以。通过`ActivityKit`进行的远程启动受系统强制的限制。 如果您尝试连续快速多次启动请求，iOS可能会由于实时活动配额或预算限制而拒绝进一步启动。 在连续尝试大约5次启动后，后续请求将开始失败，直到经过一段短暂的冷却时间为止。

+++

+++高优先级更新的预算是多少？

Apple没有为高优先级`(priority: 10)`实时活动更新指定准确的数字上限。 该系统保持动态的内部预算，以限制发送此类更新的频率。 如果在短时间内发布了太多高优先级更新，iOS可能会限制或延迟后续更新。

要最大限度地减少限制，请执行以下操作：

* **平衡优先级级别**：根据重要性合并标准`(priority: 5)`和高`(priority: 10)`更新。
* **谨慎使用高优先级**：为时间关键型更新保留高优先级，例如投放进度、订单状态或实时体育赛事得分。
* **支持频繁更新**：在应用程序的`NSSupportsLiveActivitiesFrequentUpdates`中包含`Info.plist`，并在需要频繁更新时将它设置为&#x200B;**是**。

+++

### 营销人员问题

+++我是否可以为广播营销活动中的每个用户个性化实时活动内容？

广播营销活动会向受众中的所有用户发送相同的内容。 对于个性化内容，使用针对个人用户的单一（事务性）营销活动。
+++

+++如何知道我的实时活动是否已成功交付？

在Adobe Journey Optimizer中[监控您的营销活动分析](../reports/campaign-global-report-cja-activity.md)。 您可以跟踪投放率、失败次数和参与量度。 此外，还可以考虑在您的应用程序中实施自定义分析事件。
+++

+++我能否提前安排实时活动？

API调用会立即触发实时活动。 但是，您可以通过后端系统计划API调用，或使用Journey Optimizer的编排功能适当地安排调用时间。
+++

+++如果我为已存在的实时活动发送“开始”事件，会发生什么情况？

通过Adobe的执行API远程启动实时活动时：

* 您可以在请求中包含`x-request-id`标头。 理想情况下，每个`liveActivityID`与其对应的`x-request-id`之间应该有一对一的关系。 这样可以确保在使用相同的`x-request-id`和`liveActivityID`组合发出多个请求时，设备上将只启动一个实时活动，并将忽略重复请求。

* 如果忽略`x-request-id`标头，则会单独处理每个请求，这可能会导致使用同一`liveActivityID`创建多个实时活动。 在这种情况下，未来的更新可能会失败或只适用于其中一个活动实例。

* 不应在单独的API请求中跨不同的`x-request-id`重复使用`liveActivityIDs`值。

+++

+++我能否对不同的实时活动体验进行A/B测试？

可以。创建具有不同内容结构的多个营销活动，并使用Adobe Journey Optimizer的试验功能来测试哪种营销活动效果更好。 确保您的应用程序支持所有内容状态变量。

+++

+++我应该多久更新一次实时活动？

仅当由于过于频繁的更新可能会耗尽电池并降低用户体验质量而导致有意义的信息更改时进行更新。 对于实时场景（例如投放跟踪），通常可以接受每30-60秒一次。 对于更改较慢的内容（如体育赛事得分），仅更新重大活动。

+++

+++我可以根据用户是否已启用实时活动来定位用户吗？

您需要与开发团队合作，跟踪此偏好设置并将其作为用户属性传递给Adobe Experience Platform，然后根据该属性进行分段。

+++

### API问题

+++`timestamp`和`dismissal-date`之间有何区别？

* `timestamp`：事件发生时的当前纪元时间，对于所有事件都是必需的。
* `dismissal-date`：实时活动应自动取消的未来epoch时间，仅对于“结束”事件是必需的。

+++

+++我是否需要发送每次更新调用中的所有`attributes`字段？

是，基于您`LiveActivityAttribute`类。

* 对于开始、更新或结束，属性对象中的所有字段（包括`liveActivityData`）都应包含在每次调用中。
* 只有`content-state`字段表示正在运行的实时活动上实际动态更改的内容。
* 此外，还可以包括警报对象，这可确保将推送视为用户可见的通知，而不是无提示的后台通知。 仅对于“start”情况是必需的，否则是可选的。

+++

+++纪元时间戳应采用什么格式？

使用Unix纪元时间（以&#x200B;**秒**&#x200B;为单位，而不是以毫秒为单位）。 例如：`1759937682`

+++

+++我是否可以为多个API调用使用相同的`requestId`？

不是。每个API请求都应该具有唯一的`requestId`，以确保幂等性和正确的跟踪。 使用UUID或类似的唯一标识符。

+++

+++Headless API需要什么身份验证？

请参阅[API触发的营销活动文档](https://developer.adobe.com/journey-optimizer-apis/references/messaging/)以了解身份验证要求，包括OAuth令牌和API密钥。

+++

+++如果我的API调用失败，会发生什么情况？

使用指数回退实施重试逻辑。 检查API响应以了解错误代码和消息以诊断问题。 常见故障包括活动ID无效、有效负载格式错误或身份验证问题。

+++

+++我是否可以从自己的后端服务器发送实时活动更新？

是的，这是预期行为。 当您的业务逻辑需要时，后端会调用Adobe Journey Optimizer Headless API以触发实时活动事件。

+++

+++开始、更新和结束事件是否需要其他促销活动？

不是。您可以使用同一营销活动并更改有效负载中的`event`字段。 但是，一些组织更喜欢单独的促销活动，以便更好地进行分析跟踪。

+++

### 疑难解答问题

+++我的实时活动开始但不会更新。 可能是什么问题？

常见原因：

* 开始调用与更新调用之间的`liveActivityID`或`channelID`不匹配。
* `content-state`字段与您的`ContentState`结构不匹配。
* 实时活动已结束。
* 设备存在网络连接问题。
* 用作时间戳的epoch时间不是最新的。

+++

+++无法识别`attributes-type`字段。 我该检查什么？

* 确保类名与您的Swift结构名完全匹配&#x200B;****（区分大小写）
* 验证结构是否已正确定义和注册
* 检查JSON有效负载中的拼写错误
* 确认安装的应用程序版本具有实时活动实施

+++

+++用户只会看到实时活动更新，而不会看到警报通知，这是已知问题吗？

不是。`alert`字段是可选的，在某些条件下（例如请勿打扰模式），iOS可能会禁止使用该字段。 实时活动可以静默更新，这通常是预期的行为。 发送远程启动时警报字段是必需的，否则apple会将其视为静默的后台通知。

+++

+++我可以为用户删除或清除所有实时活动吗？

您需要为每个活动的实时活动发送一个“结束”事件。 跟踪系统中每个用户处于活动状态的实时活动，以便正确清理它们。

+++

+++即使我发送了更新，我的小组件仍显示“无数据”。 可能是什么问题？

* 验证您的Widget实现是否正确访问`context.state`和`context.attributes`。
* 检查是否已在您的构件界面中处理默认值或错误状态。
* 使用`LiveActivityAssuranceDebuggable`协议调试架构。
* 使用Adobe Assurance进行测试，以查看是否接收到数据。
+++
