---
solution: Journey Optimizer
product: journey optimizer
title: 使用扩充活动
description: 了解如何使用扩充活动
hide: true
hidefromtoc: true
exl-id: 8a0aeae8-f4f2-4f1d-9b89-28ce573fadfd
source-git-commit: 323472ef9d6203cbbadc44ceb17ddcc7f6207323
workflow-type: tm+mt
source-wordcount: '2049'
ht-degree: 37%

---

# 扩充 {#enrichment}

>[!CONTEXTUALHELP]
>id="ajo_orchestration_enrichment"
>title="扩充活动"
>abstract="通过&#x200B;**扩充**&#x200B;活动，可利用来自数据库的其他信息增强目标数据。通常在分段活动之后的工作流中使用它。"


**扩充**&#x200B;活动是一个&#x200B;**定位**&#x200B;活动。它可让您使用数据库中的其他信息来增强目标数据。通常在分段活动之后的工作流中使用它。

扩充数据可来自：

* **与您的多步骤营销活动中目标工作表相同的工作表**：

  *定位一组客户并将“出生日期”字段添加到当前工作表*。

* **另一个工作表**：

  *锁定一组客户，并添加“采购”表中的“金额”和“产品类型”字段*。

将扩充数据添加到多步骤营销活动后，便可在执行&#x200B;**扩充**&#x200B;活动后添加的活动中使用，以根据客户的行为、偏好和需求将其划分为不同的组，或创建更可能引起目标受众共鸣的个性化营销消息和营销活动。

例如，您可以将与客户购买相关的多步营销活动工作表信息，并使用此数据来个性化包含客户最新购买或购买金额的电子邮件。

## 添加扩充活动 {#enrichment-configuration}

请按照以下步骤操作，配置&#x200B;**扩充**&#x200B;活动：

1. 添加活动，例如&#x200B;**生成受众**&#x200B;和&#x200B;**合并**&#x200B;活动。
1. 添加&#x200B;**扩充**&#x200B;活动。
1. 如果已在多步骤营销活动中配置了多个过渡，则可以使用&#x200B;**[!UICONTROL 主集]**&#x200B;字段定义应将哪个过渡用作主集以扩充数据。

## 添加扩充数据 {#enrichment-add}

>[!CONTEXTUALHELP]
>id="ajo_targetdata_personalization_enrichmentdata"
>title="扩充数据"
>abstract="选择要使用的数据来扩充您的多步骤营销活动。可选择两种类型的扩充数据：目标维度中的单个扩充属性或收藏集链接（即在各表之间具有 1-N 基数的链接）。"

>[!CONTEXTUALHELP]
>id="ajo_orchestration_enrichment_data"
>title="扩充活动"
>abstract="在将扩充数据添加到多步骤营销活动中后，可以在扩充活动后添加的活动中使用它，以根据客户的行为、偏好和需求来将客户分成不同的组，或者创建更可能让目标受众产生共鸣的个性化营销邮件和营销活动。"

1. 单击&#x200B;**添加扩充数据**&#x200B;并选择要用于扩充数据的属性。

   您可以选择两种类型的扩充数据：从目标维中选择单个扩充属性，或者选择收集链接。 以下示例详细介绍了每种类型：
   * [单个扩充属性](#single-attribute)
   * [收藏集链接](#collection-link)

   >[!NOTE]
   >
   >属性选择屏幕中的&#x200B;**编辑表达式按钮**&#x200B;允许您构建高级表达式以选择属性。

   ![](../assets/workflow-enrichment1.png)

## 在表之间创建链接 {#create-links}

>[!CONTEXTUALHELP]
>id="ajo_orchestration_enrichment_simplejoin"
>title="链接定义"
>abstract="在工作表数据和 Adobe Journey Optimizer 之间创建链接。例如，如果您从包含收件人的帐号、国家/地区和电子邮件的文件中加载数据，则必须创建一个指向该国家/地区表的链接，以便在其轮廓中更新此信息。"

**[!UICONTROL 链接定义]**&#x200B;部分允许您在工作表数据和Adobe Journey Optimizer之间创建链接。 例如，如果您从包含收件人的帐号、国家/地区和电子邮件的文件中加载数据，则必须创建一个指向该国家/地区表的链接，以便在其轮廓中更新此信息。

有多种类型的链接可用：

* **[!UICONTROL 1基数简单链接]**：主集中的每个记录只能与链接数据中的一个记录相关联。
* **[!UICONTROL 0或1基数简单链接]**：主集中的每个记录可以与链接数据中的0或1个记录关联，但不能与多个记录关联。
* **[!UICONTROL N个基数集合链接]**：主集中的每个记录都可以与链接数据中的0、1个或更多(N)个记录相关联。

要创建链接，请执行以下步骤：

1. 在&#x200B;**[!UICONTROL 链接定义]**&#x200B;部分中，单击&#x200B;**[!UICONTROL 添加链接]**&#x200B;按钮。

   ![](../assets/workflow-enrichment-link.png)

1. 在&#x200B;**关系类型**&#x200B;下拉列表中，选择要创建的链接类型。

1. 确定要将主集链接到的目标：

   * 若要链接数据库中的现有表，请选择&#x200B;**[!UICONTROL 数据库架构]**，然后从&#x200B;**[!UICONTROL 目标架构]**&#x200B;字段中选择所需的表。
   * 若要与输入过渡中的数据链接，请选择&#x200B;**临时架构**，然后选择要使用其数据的过渡。

1. 定义协调条件，以将主集的数据与链接架构进行匹配。 有两种类型的连接可用：

   * **简单联接**：选择特定属性以匹配两个架构中的数据。 单击&#x200B;**添加联接**，然后选择要用作协调条件的&#x200B;**Source**&#x200B;和&#x200B;**目标**&#x200B;属性。
   * **高级联接**：使用高级条件创建联接。 单击&#x200B;**添加联接**，然后单击&#x200B;**创建条件**&#x200B;按钮以打开查询建模器。

[示例](#link-example)部分提供了使用链接的工作流示例。

## 数据协调 {#reconciliation}

>[!CONTEXTUALHELP]
>id="ajo_orchestration_enrichment_reconciliation"
>title="协调"
>abstract="**扩充**&#x200B;活动可用于协调来自 Journey Optimizer 架构的数据与来自另一个架构的数据，或来自临时架构的数据（例如使用“加载”文件活动上传的数据）。这种类型的链接定义了对唯一记录的协调。Journey Optimizer 通过在目标表中添加外键来创建与目标表的链接，以存储对唯一记录的引用。"

**扩充**&#x200B;活动可用于协调来自 Campaign 数据库架构的数据与来自另一个架构的数据，或来自临时架构的数据（例如使用“加载”文件活动上传的数据）。这种类型的链接定义了对唯一记录的协调。Journey Optimizer 通过在目标表中添加外键来创建与目标表的链接，以存储对唯一记录的引用。

例如，您可以使用此选项将上传文件中指定的轮廓的国家/地区与 Campaign 数据库专用表中可用的国家/地区之一进行协调。

按照以下步骤配置具有协调链接的&#x200B;**扩充**&#x200B;活动：

1. 单击&#x200B;**协调**&#x200B;部分中的&#x200B;**添加链接**&#x200B;按钮。
1. 确定要创建协调链接的数据。

   * 若要使用Campaign数据库中的数据创建协调链接，请选择&#x200B;**数据库模式**，然后选择存储目标的模式。
   * 若要使用来自输入过渡的数据创建协调链接，请选择&#x200B;**临时架构**，然后选择存储目标数据的多步骤营销活动过渡。

1. **Label**&#x200B;和&#x200B;**Name**&#x200B;字段是根据所选的目标架构自动填充的。 您可以根据需要更改其值。

1. 在&#x200B;**协调条件**&#x200B;部分中，指定您要如何协调来自源表和目标表的数据：

   * **简单联接**：将源表中的特定字段与目标表中的其他字段进行协调。 为此，请单击&#x200B;**添加联接**&#x200B;按钮，并指定要用于协调的&#x200B;**Source**&#x200B;和&#x200B;**目标**&#x200B;字段。

     >[!NOTE]
     >
     >您可以使用一个或多个&#x200B;**简单联接**&#x200B;条件，在此情况下，必须对所有条件进行验证，以便将数据链接在一起。

   * **高级联接**：使用查询建模器配置协调条件。 为此，请单击&#x200B;**创建条件**&#x200B;按钮，然后使用AND和OR操作构建自己的规则来定义协调条件。

以下示例显示了一个多步骤营销活动，该营销活动配置为在Journey Optimizer用户档案表和生成&#x200B;**加载文件**&#x200B;活动的临时表之间创建链接。 在此示例中，**扩充**&#x200B;活动使用电子邮件地址作为协调条件来协调两个表。

![](../assets/enrichment-reconciliation.png)

## 添加产品建议 {#add-offers}

>[!CONTEXTUALHELP]
>id="ajo_orchestration_enrichment_offer_proposition"
>title="产品建议提议"
>abstract="通过“扩充”活动，您可以为每个轮廓添加产品建议。"

**[!UICONTROL 扩充]**&#x200B;活动允许您为每个配置文件添加选件。

为此，请按照使用选件配置&#x200B;**[!UICONTROL 扩充]**&#x200B;活动的步骤操作：

1. 在&#x200B;**[!UICONTROL 扩充]**&#x200B;活动中，在&#x200B;**[!UICONTROL 优惠建议]**&#x200B;部分单击&#x200B;**[!UICONTROL 添加优惠]**&#x200B;按钮

   ![](../assets/enrichment-addoffer.png)

1. 您有两个选项可供选择选件：

   * **[!UICONTROL 在类别中搜索最佳选件]** ：选中此选项并指定选件引擎调用参数（选件空间、类别或主题、联系日期、要保留的选件数）。 引擎将根据这些参数计算要添加的最佳选件。 我们建议填写类别或主题字段，而不是同时填写这两个字段。

     ![](../assets/enrichment-bestoffer.png)

   * **[!UICONTROL 预定义优惠]** ：选中此选项并指定优惠空间、特定优惠和联系日期，以直接配置要添加的优惠，而无需调用优惠引擎。

     ![](../assets/enrichment-predefinedoffer.png)

1. 选择选件后，单击&#x200B;**[!UICONTROL 确认]**&#x200B;按钮。

您现在可以在投放活动中使用选件。

### 使用扩充活动中的优惠

在多步营销活动中，如果您要在投放中使用从扩充活动中获得的选件，请按照以下步骤操作：

1. 打开投放活动，然后进入内容版本。 单击&#x200B;**[!UICONTROL 优惠设置]**&#x200B;按钮，然后在下拉列表中选择与您的优惠对应的&#x200B;**[!UICONTROL 优惠空间]**。
如果您只想查看扩充活动中的优惠，请将**[!UICONTROL 建议]**&#x200B;的数量设置为0，并保存修改。

   ![](../assets/offers-settings.png)

1. 在Email Designer中，添加包含选件的个性化设置时，单击&#x200B;**[!UICONTROL 建议]**&#x200B;图标，将显示您从&#x200B;**[!UICONTROL 扩充]**&#x200B;活动中获得的选件。 通过单击要选择的选件以将其打开。

   ![](../assets/offers-propositions.png)

   进入&#x200B;**[!UICONTROL 渲染函数]**&#x200B;并根据您的需要选择&#x200B;**[!UICONTROL HTML渲染]**&#x200B;或&#x200B;**[!UICONTROL 文本渲染]**。

   ![](../assets/offers-rendering.png)

>[!NOTE]
>
>如果您选择在&#x200B;**[!UICONTROL 扩充]**&#x200B;活动中的&#x200B;**[!UICONTROL 要保留的选件数]**&#x200B;选项处有多个选件，则单击&#x200B;**[!UICONTROL 建议]**&#x200B;图标时将显示所有选件。

## 示例 {#example}

### 单个扩充属性 {#single-attribute}

我们在此处只添加单个扩充属性，例如出生日期。执行以下步骤：

1. 在&#x200B;**属性**&#x200B;字段内单击。
1. 从定位维度中选择一个简单的字段，在我们的示例中是出生日期。
1. 单击&#x200B;**确认**。

![](../assets/workflow-enrichment2.png)

### 收藏集链接 {#collection-link}

在这个更复杂的用例中，我们将选择一个收藏集链接，它是表之间具有 1 对多基数的链接。让我们检索最近三笔低于 100 美元的购买。为此，您需要定义：

* 扩充属性：**价格**&#x200B;字段
* 要检索的行数：3
* 筛选条件：筛选掉大于 100 美元的项目
* 排序：**订单日期**&#x200B;字段的降序排序。

#### 添加属性 {#add-attribute}

您可以在此处选择用作扩充数据的收藏集链接。

1. 在&#x200B;**属性**&#x200B;字段内单击。
1. 单击&#x200B;**显示高级属性**。
1. 从&#x200B;**购买**&#x200B;表中选择&#x200B;**价格**&#x200B;字段。

<!-- ![](../assets/workflow-enrichment3.png) -->

#### 定义收藏集设置{#collection-settings}

然后，定义数据的收集方式以及要检索的记录数。

1. 在&#x200B;**选择数据收集方式**&#x200B;下拉列表中选择&#x200B;**收集数据**。
1. 在&#x200B;**要检索的行（要创建的列）**&#x200B;字段中键入“3”。

![](../assets/workflow-enrichment4bis.png)

例如，如果您想要获取客户的平均购买金额，请改选&#x200B;**汇总数据**，然后从&#x200B;**汇总函数**&#x200B;中选择&#x200B;**平均**。

请使用属性的&#x200B;**标签**&#x200B;和&#x200B;**别名**&#x200B;字段，以使属性更易于理解，如下所示。

![](../assets/workflow-enrichment5bis.png)

#### 定义筛选条件{#collection-filters}

我们在此处定义扩充属性的最大值。筛选掉大于 100 美元的项目。
1. 单击&#x200B;**创建筛选器**。
1. 添加以下两个筛选器：**Price**&#x200B;存在且&#x200B;**Price**&#x200B;小于100。 第一个筛选条件筛选掉 NULL 值，因为它们将显示为最大值。
1. 单击&#x200B;**确认**。

![](../assets/workflow-enrichment6bis.png)

#### 定义排序{#collection-sorting}

我们现在需要应用排序来检索这三个&#x200B;**最新**&#x200B;的购买。

1. 激活&#x200B;**启用排序**&#x200B;选项。
1. 在&#x200B;**属性**&#x200B;字段内单击。
1. 选择&#x200B;**订购日期**&#x200B;字段。
1. 单击&#x200B;**确认**。
1. 从&#x200B;**排序**&#x200B;下拉列表中选择&#x200B;**降序**。

![](../assets/workflow-enrichment7bis.png)

### 使用链接数据进行扩充 {#link-example}

以下示例显示了一个多步骤营销活动，该营销活动配置为在两个过渡之间创建链接。 第一个过渡使用&#x200B;**查询**&#x200B;活动定位配置文件数据，而第二个过渡包括存储到通过加载文件活动加载的文件中的购买数据。

![](../assets/enrichment-uc-link.png)

* 第一个&#x200B;**扩充**&#x200B;活动将主集（来自&#x200B;**查询**&#x200B;活动的数据）与&#x200B;**加载文件**&#x200B;活动中的架构链接。 这样，我们就可以将查询所定向的每个用户档案与相应的购买数据相匹配。

  ![](../assets/enrichment-uc-link-purchases.png)

* 添加了第二个&#x200B;**扩充**&#x200B;活动，以便使用来自&#x200B;**加载文件**&#x200B;活动的购买数据扩充多步骤活动表中的数据。 这样，我们便可以在进一步的活动中使用这些数据，例如，将发送给客户的消息与他们的购买信息个性化。

  ![](../assets/enrichment-uc-link-data.png)
