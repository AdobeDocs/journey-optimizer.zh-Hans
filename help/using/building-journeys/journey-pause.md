---
solution: Journey Optimizer
product: journey optimizer
title: 暂停历程
description: 了解如何暂停和恢复实时历程
feature: Journeys
role: User
level: Intermediate
keywords: 发布，历程，实时，有效性，检查
exl-id: a2892f0a-5407-497c-97af-927de81055ac
version: Journey Orchestration
source-git-commit: b1598fe695a53fd5261b3067f220dc3eea295dfb
workflow-type: tm+mt
source-wordcount: '2481'
ht-degree: 6%

---

# 暂停历程 {#journey-pause}

>[!CONTEXTUALHELP]
>id="ajo_journey_pause"
>title="暂停您的历程"
>abstract="暂停历程可以阻止新的轮廓进入当前正在运行的历程。在暂停时，您可以选择是否清除当前已在处理中的轮廓，或将其保留。如果选择保留，这些用户将在历程重新启动后，从下一个操作活动节点继续执行。此功能非常适合用于进行更新或紧急中止操作，同时保留历程进度。"

您可以暂停实时历程，执行所有需要的更改，然后随时重新恢复它们。<!--You can choose whether the journey is resumed at the end of the pause period, or whether it stops completely. -->在暂停期间，您可以[应用配置文件属性退出条件](#journey-exit-criteria)以根据配置文件属性排除配置文件。 历程在暂停期结束时自动恢复。 您也可以[手动](#journey-resume-steps)恢复它。

## 主要优点 {#journey-pause-benefits}

暂停和恢复历程通过允许暂停实时历程而不中断客户体验，为历程参与者提供了更好的控制和灵活性。 暂停后，不会发送任何通信，并且轮廓将停留在暂停状态，直到历程恢复。

此功能降低在错误或更新（例如：更改消息内容）期间发送意外消息的风险，支持更安全的历程管理，并提高从业者的信心。 直接在UI中查看暂停的历程及其状态可进一步提高透明度和操作敏捷性。

>[!CAUTION]
>
>* 暂停和恢复历程的权限仅限于具有&#x200B;**[!DNL Publish journeys]**&#x200B;高级权限的用户。 在[!DNL Journey Optimizer]本节[中了解有关管理](../administration/permissions-overview.md)用户访问权限的更多信息。
>
>* 在开始使用暂停/恢复功能之前，[阅读护栏和限制](#journey-pause-guardrails)。


## 如何暂停历程 {#journey-pause-steps}

您可以暂停任何&#x200B;**实时**&#x200B;历程。

要暂停历程，请执行以下步骤：

1. 打开要暂停的历程。
1. 单击历程画布右上角的&#x200B;**...更多**&#x200B;按钮，然后选择&#x200B;**暂停**。

   ![暂停历程按钮](assets/pause-journey-button.png)

1. 选择如何管理当前位于历程中的用户档案。

   ![暂停历程选项](assets/pause-confirm.png){width="50%" align="left"}

   您可以：

   * **保留**&#x200B;配置文件 — 配置文件将等待下一个&#x200B;**操作**&#x200B;节点以继续历程
   * **放弃**&#x200B;配置文件 — 配置文件将在下一个&#x200B;**操作**&#x200B;节点从历程中排除

   暂停历程时，我们假定您计划在某个时间点恢复历程。 但是，历程不能无限期暂停。 要防止出现这种情况，您可以定义历程应暂停的时长（1到14天之间）。 在选定天数后，历程会自动恢复。

1. 单击&#x200B;**暂停**&#x200B;按钮确认。

可在历程清单中看到贵组织暂停的历程中保留的最大配置文件数。 仅当至少暂停一个历程时，它才可见。 此指示器还会显示暂停的历程总数。 每30分钟刷新一次。 在[护栏和限制](#guardrails-and-limitations)中了解详情。

![当前暂停的历程和配置文件数](assets/profiles-in-paused-journeys.png){width="50%" align="left"}

从历程列表中，您可以暂停一个或多个&#x200B;**实时**&#x200B;历程。 要暂停一组历程（_批量暂停_），请在列表中选择它们，然后单击屏幕底部蓝色栏中的&#x200B;**暂停**&#x200B;按钮。 **暂停**&#x200B;按钮仅在选择&#x200B;**实时**&#x200B;历程时可用。

![从底部栏批量暂停两个实时历程](assets/bulk-pause-journeys.png)

## 暂停的历程执行逻辑 {#journey-pause-exec}

当历程暂停时，无论保持/丢弃模式如何，都会丢弃新入口。

暂停历程后，用户档案管理和活动执行取决于活动。 行为详见下文。 如需全面了解，另请参阅此[端到端示例](#journey-pause-sample)。


| 历程活动 | 历程暂停时 |
|-------------------------|--------------------------------------------------|
| [受众资格](audience-qualification-events.md) | <ul> <li>在画布中的第一个节点：会丢弃对受众的任何配置文件资格 </li><li>在其他节点中：与实时历程中的行为相同，但是，如果受众资格在<strong>操作</strong>活动之后并且用户在该操作上暂停，则受众资格将被丢弃。 </li></ul> |
| [单一事件](general-events.md) | <ul> <li>在画布中的第一个节点处：丢弃事件</li><li>在其他节点中：与实时历程中的行为相同，但是，如果事件在<strong>操作</strong>活动之后并且用户在该操作上暂停，则放弃该事件。 </li></ul> |
| [读取受众](read-audience.md) | 与实时历程中的行为相同，但具有以下特性： <ol> <li> 如果在<strong>读取受众</strong>活动开始后按下<strong>暂停</strong>，则进入历程的用户档案将继续（直到下一个<strong>操作</strong>活动）。 当历程以特定速度读取受众时，如果整个受众尚未进入，则将丢弃队列中的剩余配置文件。</li><li> 对于单次执行：如果计划日期早于恢复日期，则恢复时不会显示错误。 该时间表将被忽略。</li><li>对于增量历程： <ul><li>如果在首次发生之前发生暂停，则在恢复时，将播放整个受众。 </li><li>例如，如果发生暂停，则在每日重复周期的第4天，历程保持暂停状态直到第9天，则在恢复时，将包含从第4天到第9天输入的所有用户档案  </li></ul></ol> |
| [反应](reaction-events.md) | 与实时历程中的行为相同，但是，如果反应在<strong>操作</strong>活动之后并且用户在该操作上暂停，则反应事件将被丢弃。 |
| [等待](wait-activity.md) | 与实时历程中的行为相同 |
| [条件](condition-activity.md) | 与实时历程中的行为相同 |
| [内容决策](content-decision.md) | 在暂停历程后，系统会根据用户选择的内容暂停或丢弃用户档案 |
| [渠道操作](journeys-message.md) | 在暂停历程后，系统会根据用户选择的内容暂停或丢弃用户档案 |
| [自定义操作](../action/action.md) | 在暂停历程后，系统会根据用户选择的内容暂停或丢弃用户档案 |
| [更新配置文件](update-profiles.md)和[跳转](jump.md) | 在暂停历程后，系统会根据用户选择的内容暂停或丢弃用户档案 |
| [外部数据Source](../datasource/external-data-sources.md) | 与实时历程中的行为相同 |
| [退出条件](journey-properties.md#exit-criteria) | 与实时历程中的行为相同 |


在[本节](#discards-troubleshoot)中了解如何对放弃进行故障排除。

## 如何恢复已暂停的历程 {#journey-resume-steps}

>[!CONTEXTUALHELP]
>id="ajo_journey_resume"
>title="恢复您的历程"
>abstract="恢复历程后，新的轮廓将再次被允许进入。如果在暂停期间已有轮廓处于等待状态，则他们会继续其历程。这一功能非常适合在更新或暂停后安全地重新启动历程。"

暂停的历程在最大暂停时段14天结束时自动恢复。 它们可以随时手动恢复。 恢复暂停的历程允许新用户档案再次进入。 如果在暂停期间已有轮廓处于等待状态，则他们会继续其历程。这一功能非常适合在更新或暂停后安全地重新启动历程。

要恢复暂停的历程并开始再次侦听历程事件，请执行以下步骤：

1. 打开要恢复的历程。
1. 选择历程画布右上角的&#x200B;**...更多**&#x200B;按钮，然后选择&#x200B;**继续**。

   历程切换到&#x200B;**恢复**&#x200B;状态。 当历程继续时，新入口在一分钟内开始。 恢复保留的用户档案可能需要一些时间 — 用户档案恢复速度为5k tps。  由于必须恢复所有配置文件才能使历程再次处于&#x200B;**实时**&#x200B;状态，因此从&#x200B;**恢复**&#x200B;状态过渡到&#x200B;**实时**&#x200B;状态可能需要一些时间。

1. 单击“**继续**”按钮确认。


从历程列表中，您可以恢复一个或多个&#x200B;**已暂停**&#x200B;历程。 要恢复一组历程（_批量恢复_），请选择这些历程并单击屏幕底部蓝色栏中的&#x200B;**恢复**&#x200B;按钮。 请注意，**继续**&#x200B;按钮仅在选择&#x200B;**已暂停**&#x200B;历程时可用。


## 在暂停的历程中应用退出标准 {#journey-exit-criteria}

暂停历程时，您可以根据用户档案属性应用退出标准。 此过滤器允许排除与恢复时定义的表达式匹配的用户档案。 一旦设置了基于用户档案属性的退出标准，该标准就会在操作节点上强制实施，即使对于新用户档案进入也是如此。 符合条件的现有配置文件和进入历程的新配置文件将在它们遇到的下一个操作节点&#x200B;**上从历程**&#x200B;中排除。

例如，要从暂停的历程中排除所有法国客户，请执行以下步骤：

1. 浏览到要修改的暂停历程。

1. 选择&#x200B;**退出条件**&#x200B;图标。

   ![将配置文件属性退出条件添加到暂停的历程](assets/add-exit-criteria.png)

1. 在&#x200B;**退出标准**&#x200B;设置中，单击&#x200B;**添加退出标准**&#x200B;以根据配置文件属性定义筛选器。

1. 设置表达式以排除国家/地区属性等于“法国”的用户档案。

   ![将配置文件属性退出条件添加到暂停的历程](assets/add-country-filter.png)

1. 保存筛选器并单击&#x200B;**更新历程**&#x200B;按钮以应用更改。

1. [继续历程](#journey-resume-steps)。

   在恢复时，所有将“国家/地区”属性设置为“法国”的用户档案都将在下一个操作节点自动从历程中排除。 任何将“国家/地区”属性设置为“法国”的新用户档案尝试进入旅程时，都将在下一个操作节点被阻止。

请注意，当前在历程中的用户档案和新用户档案的用户档案排除只有在到达操作节点&#x200B;**时才会发生**。

>[!CAUTION]
>
>* 每个历程只能设置&#x200B;**一个**&#x200B;基于配置文件属性的退出条件。
>
>* 您只能在&#x200B;**已暂停**&#x200B;历程中创建、更新或删除基于配置文件属性的退出条件。
>
>* 在此部分[中了解有关基于配置文件属性的退出条件](journey-properties.md#profile-exit-criteria)的更多信息。

## 护栏和限制 {#journey-pause-guardrails}

* 历程版本最多可暂停&#x200B;**14天**，整个组织的暂停历程中最多允许&#x200B;**10万个配置文件**。
此限制每30分钟检查一次。 这意味着您可能会暂时超过1000万的阈值，但是一旦系统检测到该阈值，任何额外的用户档案都将被自动放弃。

  如果您恢复历程以使保留的用户档案数恢复到限制以下，则历程将立即恢复 — 但更新用户档案计数最多可能需要30分钟。 在此期间，系统仍会将这些配置文件视为已暂停。

* 对于包含[入站活动](../channels/gs-channels.md#mobile-app-and-web-experiences)（例如，应用程序内、Web等）的历程，暂停历程不会中断已触发的通信。 如果用户档案在暂停之前符合集客活动条件，则仍会发送相应的消息。 要完全停止所有入站通信，必须停止旅程。
* 暂停的历程计入实时历程配额
* 已进入历程但在暂停期间被放弃的用户档案仍将被计为可参与的用户档案
* 暂停的历程会以与实时历程相同的方式纳入所有业务规则中
* 历程全局超时仍适用于暂停的旅程。 例如，如果某个用户档案在历程中持续90天且历程暂停，则此用户档案仍将在第91天退出历程
* 用户档案到达操作活动时，在暂停的历程中&#x200B;**放弃**。 如果他们在旅程暂停期间坚持等待并在恢复后退出，则将继续旅程，而不会被丢弃。 [查看端到端示例](#journey-pause-sample)
* 即使在暂停后，随着继续处理事件，这些事件也将计入每秒的历程事件数配额，之后将形成单一形式的限制
* 当配置文件在暂停的历程中保留时，在恢复时配置文件属性会刷新
* 条件仍会在暂停的历程中执行，因此，如果历程因数据质量问题而暂停，则可以使用错误数据评估操作节点之前的任何条件
* 对于基于&#x200B;**读取受众**&#x200B;历程的增量受众，将考虑暂停的持续时间。 这不适用于受众资格或基于事件的历程（如果在暂停期间收到受众资格或事件，并且它们是历程中的第一个活动，则这些事件将被丢弃）
* 如果配置文件保留在历程中，并且此历程在几天后自动恢复，则配置文件将继续该历程并且不会被丢弃。 如果要删除它们，必须停止旅程
* 在暂停的历程中，不会为[批次区段警报触发警报](../reports/alerts.md#alert-read-audiences)
* 在历程的14天暂停状态终止后，系统中没有审核日志
* 某些已弃用的配置文件会在历程步骤事件中可见，但在报表中不可见。 例如：
   * 放弃&#x200B;**读取受众**&#x200B;的业务事件
   * 由于历程暂停，**读取受众**&#x200B;作业被丢弃
   * **Event**&#x200B;活动在配置文件正在等待的操作之后时丢弃了事件



## 端到端示例 {#journey-pause-sample}

让我们以以下历程为例：

![历程示例](assets/pause-journey-sample.png){zoomable="yes"}

暂停此历程时，您可以选择配置文件是&#x200B;**Discarded**&#x200B;还是&#x200B;**Hold**，然后配置文件管理如下：

1. **AddToCart**&#x200B;活动：所有新配置文件入口都被阻止。 如果某个用户档案在暂停之前已进入历程，则会继续到下一个操作节点。
1. **等待**&#x200B;活动：用户档案继续在节点上正常等待，即使历程处于暂停状态，用户档案也将退出该节点。
1. **条件**：配置文件继续通过条件，并根据条件上定义的表达式移动到右侧分支。
1. **推送**/**电子邮件**&#x200B;活动：在暂停的历程中，用户档案会开始等待或放弃（根据用户在暂停时所做的选择）下一个操作节点。 因此，用户档案将开始等待或丢弃在那里。
1. 在&#x200B;**操作**&#x200B;节点之后的&#x200B;**事件**：如果配置文件正在等待&#x200B;**操作**&#x200B;节点并且之后有&#x200B;**事件**&#x200B;活动，如果该事件被触发，则放弃该事件。

根据此行为，您会看到暂停历程中的配置文件数量在增加，大多是在&#x200B;**操作**&#x200B;之前的活动中。 例如，在该示例中，**等待**&#x200B;活动仍处于启用状态，这增加了在退出&#x200B;**条件**&#x200B;活动时经历该活动的配置文件数。

当您继续此历程时：

1. 全新旅程入口在一分钟内开始。
1. 当前在历程中等待&#x200B;**操作**&#x200B;活动的配置文件将以5k tps的速率恢复。 然后，他们可以进入等待的&#x200B;**操作**，并继续历程。

## 对暂停历程中的配置文件放弃进行故障诊断 {#discards-troubleshoot}

您可以使用[Adobe Experience Platform查询服务](https://experienceleague.adobe.com/docs/experience-platform/query/api/getting-started.html?lang=zh-Hans){target="_blank"}来查询步骤事件，这些步骤事件可以根据配置文件放弃发生的时间提供更多信息。

* 对于在用户档案进入历程之前发生的丢弃，请使用以下代码：

  ```sql
  SELECT
  TIMESTAMP,
  _experience.journeyOrchestration.profile.ID,
  to_json(_experience.journeyOrchestration)
  FROM
  journey_step_events
  WHERE
  _experience.journeyOrchestration.serviceEvents.dispatcher.eventType = 'PAUSED_JOURNEY_VERSION'
  AND _experience.journeyOrchestration.journey.versionID=<jvId>  
  ```

  这将列出在历程入口点发生的丢弃：

   1. 当受众历程正在运行并且第一个节点仍在处理时，如果历程暂停，则所有未处理的配置文件都会被丢弃。

   1. 当在历程暂停时新的单一事件到达开始节点（以触发进入）时，事件被丢弃。

* 对于在配置文件已位于历程中时发生的丢弃，请使用以下代码：

  ```sql
  SELECT
  TIMESTAMP,
  _experience.journeyOrchestration.profile.ID,
  to_json(_experience.journeyOrchestration)
  FROM
  journey_step_events
  WHERE
  _experience.journeyOrchestration.serviceEvents.stateMachine.eventType = 'JOURNEY_IN_PAUSED_STATE'
  AND _experience.journeyOrchestration.journey.versionID=<jvId> 
  ```

  此命令列出当配置文件在历程中时发生的丢弃：

   1. 如果历程在启用放弃选项的情况下暂停，并且在暂停之前已输入用户档案，则该用户档案在到达下一个操作节点时将被丢弃。

   1. 如果在选择保留选项的情况下暂停了历程，但由于超过1000万配额而丢弃了用户档案，则这些用户档案在到达下一个操作节点时仍将被丢弃。



