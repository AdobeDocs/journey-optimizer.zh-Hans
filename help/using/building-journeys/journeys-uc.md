---
title: 历程用例
description: 历程用例
source-git-commit: 4464ea7169424c1ec6212394b8bda79a9bec1913
workflow-type: tm+mt
source-wordcount: '819'
ht-degree: 2%

---

# 历程用例

![](../assets/do-not-localize/badge.png)

此部分介绍一个结合了读取区段、事件、反应事件和电子邮件/推送消息的用例。

![](../assets/jo-uc1.png)

## 用例描述

在此用例中，我们希望向属于特定区段的所有客户发送第一条消息（电子邮件和推送）。

根据他们对第一条消息的反应，我们希望发送特定的消息。

收到第一条消息后，我们会等待一天，让客户打开推送或电子邮件。 如果没有反应，我们会给他们发一封后续邮件。

然后，我们等待购买并发送推送消息以感谢客户。

## 先决条件

要使此用例正常工作，您需要配置以下内容：

* 一个区段，适用于居住在亚特兰大、旧金山或西雅图的1980年以后出生的所有客户。
* 购买事件
* 三条消息

### 创建区段

在我们的历程中，我们希望利用特定的客户群。 属于该区段的所有个人都将进入历程并执行不同的步骤。 在我们的示例中，我们需要一个客户群，以1980年以后出生的所有居住在亚特兰大、旧金山或西雅图的客户为目标。

有关区段的更多信息，请参阅此[页面](../segment/about-segments.md)。

1. 在&#x200B;**[!UICONTROL Segments]**&#x200B;菜单中，单击&#x200B;**[!UICONTROL Create segment]**。

1. 在&#x200B;**[!UICONTROL Segment properties]**&#x200B;窗格中，输入区段的名称。

1. 将所需字段从左侧窗格拖放到中心工作区中，然后根据需要对其进行配置。 在此示例中，我们使用&#x200B;**City**&#x200B;和&#x200B;**Birth year**&#x200B;属性字段。

1. 单击 **[!UICONTROL Save]**。

   ![](../assets/add-attributes.png)

该区段现已创建完成，可随时用于您的历程。 使用&#x200B;**读取区段**&#x200B;活动，您可以让属于该区段的所有个人进入历程。

### 配置事件

您需要配置客户购买产品时发送到历程的事件。 当历程收到事件时，将触发“谢谢”消息。

为此，我们使用基于规则的事件。 有关事件的更多信息，请参阅此[页面](../event/about-events.md)。

1. 在“管理”部分，浏览至&#x200B;**[!UICONTROL Configurations]**，然后单击&#x200B;**[!UICONTROL Events]**。 单击&#x200B;**[!UICONTROL Add]**&#x200B;以创建新事件。

1. 输入事件的名称。

1. 在 **[!UICONTROL Event ID type]** 字段中，选择 **[!UICONTROL Rule Based]**。

1. 定义&#x200B;**[!UICONTROL Schema]**&#x200B;和有效负载&#x200B;**[!UICONTROL Fields]**。 您可以使用多个字段，例如已购买的产品、购买日期和购买ID。

1. 在&#x200B;**[!UICONTROL Event ID condition]**&#x200B;字段中，定义系统用于识别触发历程的事件的条件。 例如，您可以添加`purchaseMessage`字段并定义以下规则：`purchaseMessage="thank you"`

1. 定义&#x200B;**[!UICONTROL Namespace]**&#x200B;和&#x200B;**[!UICONTROL Key]**。

1. 单击 **[!UICONTROL Save]**。

   ![](../assets/jo-uc2.png)

事件现已配置完毕，可随时用于您的历程。 使用相应的事件活动，您可以在客户每次购买时触发操作。

### 创建消息

对于此用例，我们需要创建三条消息：

* 推送和电子邮件首发消息
* 推送“谢谢”消息
* 电子邮件跟进消息

![](../assets/jo-uc3.png)

请参阅此[部分](../segment/about-segments.md) ，了解如何设计和发布这些消息。

## 设计历程

1. 通过&#x200B;**读取区段**&#x200B;活动开始历程。 选择之前创建的区段。 属于该区段的所有个人都将进入历程。

   ![](../assets/jo-uc4.png)

1. 删除&#x200B;**消息**&#x200B;活动，然后选择推送和电子邮件的首条消息。 此消息将发送给历程中的所有个人。

   ![](../assets/jo-uc5.png)

1. 将光标放在消息活动上并单击“+”符号以创建新路径。

1. 在第一个路径中，添加&#x200B;**Reaction**&#x200B;事件，然后选择&#x200B;**Push opened**。 当属于该区段的个人打开第一条消息的推送版本时，将触发该事件。

1. 在第二个路径中，添加&#x200B;**Reaction**&#x200B;事件，然后选择&#x200B;**Email opened**。 当个人打开电子邮件时，将触发该事件。

1. 在其中一个反应活动中，选中&#x200B;**定义事件超时**&#x200B;框，定义持续时间（在我们的示例中为1天）并选中&#x200B;**设置超时路径**。 这会为未打开推送或电子邮件第一封邮件的用户创建另一个路径。

   >[!NOTE]
   >
   >在为多个事件配置超时（本例中是两个反应）时，您只需为其中一个事件配置超时。

1. 在超时路径中，删除&#x200B;**Message**&#x200B;活动，然后选择电子邮件跟进消息。 此消息将发送给未在第二天打开电子邮件或推送第一封邮件的用户。

1. 将三个路径连接到之前创建的购买事件。 当个人购买商品时，将触发该事件。

1. 事件后，删除&#x200B;**Message**&#x200B;活动，然后选择电子邮件“谢谢”。

1. 添加&#x200B;**End**&#x200B;活动。

## 测试并发布历程

1. 在测试历程之前，请验证历程是否有效且没有错误。

1. 单击位于右上角的&#x200B;**测试**&#x200B;切换开关以激活测试模式。 定义测试用户档案如何输入测试：单个用户档案，或一次最多100个。 请参阅此[部分](testing-the-journey.md)以了解如何使用测试模式。

1. 历程准备就绪后，使用位于右上角的&#x200B;**Publish**&#x200B;按钮发布该历程。
