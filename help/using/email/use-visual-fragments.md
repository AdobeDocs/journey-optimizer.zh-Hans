---
solution: Journey Optimizer
product: journey optimizer
title: 使用可视化片段
description: 了解如何在Journey Optimizer营销活动和历程中创建电子邮件时使用可视化片段
feature: Email Design, Fragments
topic: Content Management
role: User
level: Beginner
exl-id: 25a00f74-ed08-479c-9a5d-4185b5f3c684
source-git-commit: 60907756a261c1f672944eccefbfe2ee90d0d017
workflow-type: tm+mt
source-wordcount: '1028'
ht-degree: 1%

---

# 将可视片段添加到电子邮件 {#use-visual-fragments}

片段是可重复使用的组件，可以在跨Journey Optimizer营销活动、历程或内容模板的一个或多个电子邮件中引用。 此功能允许预先构建多个自定义内容块，营销用户可以使用这些内容块在改进的设计过程中快速组合电子邮件内容。 [了解如何创建和管理片段](../content-management/fragments.md)。

➡️ [在此视频中了解如何管理、创作和使用片段](../content-management/fragments.md#video-fragments)

## 使用片段 {#use-fragment}

要在电子邮件中使用片段，请执行以下步骤。

>[!NOTE]
>
>您最多可以在给定投放中添加30个片段。 片段最多只能嵌套1级。

1. 使用[电子邮件Designer](get-started-email-design.md)打开任何电子邮件或模板内容。

1. 从左边栏中选择&#x200B;**[!UICONTROL 片段]**&#x200B;图标。

   ![](assets/fragments-in-designer.png)

1. 此时将显示在当前沙盒中创建的所有可视化片段的列表。 它们按创建日期排序：最近添加的可视片段首先显示在列表中。 您可以：

   * 通过开始键入特定片段的标签来搜索该片段。
   * 按升序或降序对片段排序。
   * 更改片段的显示方式（卡片视图或列表视图）。
   * 刷新列表。

   >[!NOTE]
   >
   >如果在编辑内容时修改或添加了某些片段，则列表将使用最新更改进行更新。

1. 将列表中的任何片段拖放到要插入它的区域。

   ![](assets/fragment-insert.png)

   >[!CAUTION]
   >
   >您可以将任何&#x200B;**草稿**&#x200B;或&#x200B;**实时**&#x200B;片段添加到您的内容中。 但是，如果历程或营销活动中正在使用具有草稿状态的片段，您将无法激活该历程或营销活动。 在历程或营销活动发布中，草稿片段将显示错误，您需要批准它们才能发布。

1. 与任何其他组件一样，您可以在内容中移动片段。

1. 选择片段以在右侧显示相应的窗格。 从该位置，您可以从内容中删除片段或复制片段。 您还可以直接从片段顶部显示的上下文菜单执行这些操作。

   ![](assets/fragment-right-pane.png)

1. 在&#x200B;**[!UICONTROL 设置]**&#x200B;选项卡中，您可以：

   * 选择您希望片段显示的设备。
   * 需要时，在新选项卡中打开片段以对其进行编辑。 [了解详情](../content-management/fragments.md#fragments)
   * 浏览引用。 [了解详情](../content-management/fragments.md#visual-expression)

1. 您可以使用&#x200B;**[!UICONTROL 样式]**&#x200B;选项卡进一步自定义片段。

1. 如果需要，您可以使用原始片段中断继承。 [了解详情](#break-inheritance)

1. 添加所需数量的片段，然后&#x200B;**[!UICONTROL 保存]**&#x200B;您的更改。

### 在片段中使用动态内容时的限制 {#fragment-dynamic-content}

>[!CAUTION]
>
>使用包含动态内容（条件内容）的片段时，请注意以下限制：
>
>**不支持嵌套包含动态内容的片段。**&#x200B;不能将包含动态内容的片段放在也包含动态内容的已解锁片段中。 此不受支持的配置可能导致：
>
>* 条件内容映射丢失
>* 电子邮件Designer中的兼容模式警告
>* 电子邮件渲染不一致
>
>**推荐的方法：**&#x200B;在电子邮件中使用多个片段和动态内容时，请在电子邮件级别将每个片段直接添加到其自己的结构块中。 这可以确保正常运行，并防止出现上述问题。

## 有关具有动态内容的片段的最佳实践 {#fragment-best-practices}

使用可视化片段和动态内容（条件内容）时，请遵循以下最佳实践：

* **正确构造电子邮件**：使用包含动态内容的片段构建电子邮件时，在电子邮件级别将每个片段添加到专用结构块中。 避免将包含动态内容的片段嵌套在其他也包含动态内容的已解锁片段中。

* **提前计划**：在将片段添加到电子邮件之前，请确定哪些片段包含动态内容并相应地计划布局。 这有助于防止配置问题，并确保从一开始就保持结构干净。

* **仔细设计可重用片段**：在创建将包含动态内容的片段时，请考虑如何使用它们。 如果片段需要嵌套在其他片段中，请避免将动态内容同时添加到父片段和子片段。

* **疑难解答**：如果遇到条件内容映射或兼容模式警告丢失的情况：
   * 检查您的电子邮件结构以查找包含动态内容的嵌套片段
   * 通过在电子邮件级别将每个包含动态内容的片段移动到其自身的结构块中进行重构
   * 保存并验证条件内容映射是否已正确恢复

## 使用隐式变量 {#implicit-variables-in-fragments}

隐式变量增强了现有片段功能，以提高内容重用和脚本用例的效率。 片段可以使用输入变量并创建可在营销活动和历程内容中使用的输出变量。

了解如何在[本节](../personalization/use-expression-fragments.md#implicit-variables)中使用隐式变量。

## 自定义可编辑字段 {#customize-fields}

如果所选片段的某些部分已变为可编辑，您可以在将该片段添加到内容中后覆盖其默认值。 [了解如何使您的片段可自定义](../content-management/customizable-fragments.md)

要自定义片段中的可编辑字段，请执行以下步骤：

1. 将片段添加到您的内容。

1. 选择它可打开右侧的属性窗格。

   片段中的所有可编辑字段显示在&#x200B;**片段**&#x200B;部分下的&#x200B;**设置**&#x200B;选项卡中。

1. 在右侧窗格中选择可编辑字段时，会在中央预览窗格中以绿色突出显示该字段，以便轻松识别其在内容中的位置。

   在以下示例中，可以编辑图像&#x200B;**源**&#x200B;和&#x200B;**替换文本**&#x200B;以及“单击此处”按钮&#x200B;**URL**。

   ![](assets/fragment-editable.png)

>[!CAUTION]
>
>当在片段中同时编辑按钮组件的&#x200B;**标签**&#x200B;和&#x200B;**URL**&#x200B;时，跟踪报表将显示URL而不是按钮标签。 [了解有关跟踪的更多信息](../email/message-tracking.md)

## 中断继承 {#break-inheritance}

编辑可视片段时，将同步更改。 它们会自动传播到包含该片段的所有草稿或实时历程/营销活动和内容模板。

添加到电子邮件或内容模板时，片段默认进行同步。 但是，您可以中断来自原始片段的继承。 在这种情况下，片段的内容将被复制到当前设计中，并且更改不再同步。

要中断继承，请执行以下步骤：

1. 选择片段。

1. 单击上下文工具栏中的解锁图标。

   ![](assets/fragment-break-inheritance.png)

1. 该片段将成为不再链接到原始片段的独立元素。 可将其编辑为内容中的任何其他内容组件。 [了解详情](content-components.md)
